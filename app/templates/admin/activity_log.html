{% extends "base.html" %}
{% set title = "Activity Log" %}

{% block content %}
<h1 class="h3 mb-4">Activity Log</h1>

<div class="card">
  <div class="card-body table-responsive">
    <table class="table table-sm table-striped align-middle">
      <thead>
        <tr>
          <th>Time</th>
          <th>Actor</th>
          <th>Action</th>
          <th>Target</th>
          <th>Details</th>
        </tr>
      </thead>
      <tbody>
        {% for r in rows %}
        <tr>
          <td>
            {% if r.timestamp %}
              {{ r.timestamp.strftime("%d %b %Y, %H:%M") }}
            {% else %}
              —
            {% endif %}
          </td>

          <td>
            {% if r.actor_email %}
              {{ r.actor_email }}
            {% else %}
              <span class="text-muted">System</span>
            {% endif %}
          </td>

          <td>
            {{ r.action_label }}
          </td>

          <td>
            {% if r.target_name %}
              {{ r.target_name }}<br>
              <span class="text-muted small">{{ r.target_email }}</span>
            {% else %}
              —
            {% endif %}
          </td>

          <td>
            {% if r.details %}
              <pre class="mb-0 small">{{ r.details }}</pre>
            {% else %}
              —
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
